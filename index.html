<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><style type="text/css">svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.3333333333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);transform:scale(1,-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}</style><link href="/universal-pwa/favicon.ico" rel="shortcut icon"><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"><link href="/universal-pwa/manifest.json" rel="manifest"><title>HW-Universal-PWA</title><meta content="HyperWeb Universal Progressive Web App" name="description"><meta content="#000000" name="theme-color"><script>window.prerenderReady=!1</script><link href="/universal-pwa/static/css/1.49131b3a.chunk.css" rel="stylesheet"><link href="/universal-pwa/static/css/main.7d93c049.chunk.css" rel="stylesheet"><link href="https://raw.githubusercontent.com" rel="preconnect"><link href="https://i.imgur.com" rel="preconnect"><link href="/universal-pwa/static/js/1.d52bbd2a.chunk.js" rel="preload" as="script"><link href="/universal-pwa/static/js/main.35ff5035.chunk.js" rel="preload" as="script"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div><div><nav class="navbar navbar-expand-md navbar-light bg-light"><a href="/universal-pwa/" class="navbar-brand">HW Universal PWA</a><button aria-label="navbar-toggler" class="navbar-toggler" type="button"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse"><ul class="navbar-nav"><li class="nav-item"><a href="/universal-pwa/" class="nav-link"><svg aria-hidden="true" class="svg-inline--fa fa-home fa-w-18" data-icon="home" data-prefix="fas" focusable="false" role="img" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z" fill="currentColor"></path></svg> Home</a></li><li class="nav-item"><a href="/universal-pwa/blog/" class="nav-link"><svg aria-hidden="true" class="svg-inline--fa fa-rss-square fa-w-14" data-icon="rss-square" data-prefix="fas" focusable="false" role="img" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM112 416c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm157.533 0h-34.335c-6.011 0-11.051-4.636-11.442-10.634-5.214-80.05-69.243-143.92-149.123-149.123-5.997-.39-10.633-5.431-10.633-11.441v-34.335c0-6.535 5.468-11.777 11.994-11.425 110.546 5.974 198.997 94.536 204.964 204.964.352 6.526-4.89 11.994-11.425 11.994zm103.027 0h-34.334c-6.161 0-11.175-4.882-11.427-11.038-5.598-136.535-115.204-246.161-251.76-251.76C68.882 152.949 64 147.935 64 141.774V107.44c0-6.454 5.338-11.664 11.787-11.432 167.83 6.025 302.21 141.191 308.205 308.205.232 6.449-4.978 11.787-11.432 11.787z" fill="currentColor"></path></svg> Blog</a></li><li class="nav-item"><a href="/universal-pwa/app/" class="nav-link">Admin</a></li><li class="nav-item"><a href="https://github.com/HW-Core/universal-pwa" class="nav-link">Repository <svg aria-hidden="true" class="svg-inline--fa fa-external-link-alt fa-w-18" data-icon="external-link-alt" data-prefix="fas" focusable="false" role="img" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><path d="M576 24v127.984c0 21.461-25.96 31.98-40.971 16.971l-35.707-35.709-243.523 243.523c-9.373 9.373-24.568 9.373-33.941 0l-22.627-22.627c-9.373-9.373-9.373-24.569 0-33.941L442.756 76.676l-35.703-35.705C391.982 25.9 402.656 0 424.024 0H552c13.255 0 24 10.745 24 24zM407.029 270.794l-16 16A23.999 23.999 0 0 0 384 303.765V448H64V128h264a24.003 24.003 0 0 0 16.97-7.029l16-16C376.089 89.851 365.381 64 344 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V287.764c0-21.382-25.852-32.09-40.971-16.97z" fill="currentColor"></path></svg></a></li></ul></div></nav><div style="padding:20px"><h1>HW Universal PWA</h1><p><img alt="image" src="https://i.imgur.com/mDWWMum.jpg"></p><p>This is a boilerplate React project that allows you to start creating an Universal PWA. It is based on a flexible setup of <a href="https://facebook.github.io/create-react-app/">create-react-app</a> script without any external framework such as Next.js or GatsbyJS.</p><p><strong>An universal PWA is an app that:</strong></p><ul><li>can be indexable by web crawler (even those who cannot execute javascript)</li><li>can work offline (thankfully to the serviceWorker)</li><li>can work on any devices</li><li>can be installed natively and uses devices APIs</li><li>can be used for every kind of project: app, static website, hybrid</li></ul><p><strong>Moreover it's preconfigured to have:</strong></p><ul><li>path aliases</li><li>full-working intellisense</li><li>debug configurations</li><li>modular directory structure</li><li>formatting rules and settings for visual studio code</li><li>automatic sitemap.xml for both SSG and SSR</li><li>automatic installation of missing npm modules at start</li><li><p>GraphQL and REST ready</p></li></ul><p>and many other useful features allowing you to develop at the best!</p><p>So please, use VSCode, try to be <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a>, comment your code with <a href="http://usejsdoc.org/">JSDocs</a>, learn to use <a href="https://reactjs.org/docs/context.html">React contexts</a> and all Javascript ES6 and React best practices and patterns!</p><p><strong>Note:</strong> we're using 4 spaces (instead of 2 that is common in javascript because of <a href="http://callbackhell.com/">callback hell</a>) because it discourages nesting. In fact reducing the spaces to fit more levels in is a counterproductive idea. Use async/await as much as possible.</p><h3>How to install</h3><ol><li>npm install</li><li>create a copy of /src/conf/conf.dist.js and rename in conf.js (do not delete or rename the .dist.js file directly!)</li><li>Configure your conf.js</li></ol><h3>How to develop</h3><p>You can edit this project on your needs, even ejecting CRA to have a full configurable project. However in most cases you just need to edit following files:</p><ol><li><strong>package.json:</strong> app name, version etc.</li><li><strong>src/conf/conf.js</strong></li><li><strong>public/manifest.json</strong></li><li><strong>src/client/</strong> files implementing your logic</li><li><strong>optional:</strong> other /apps/ configurations</li></ol><h3>How to run (development):</h3><ol><li>npm run start</li></ol><h3>How to serve (production)</h3><ol><li><strong>npm run build</strong> or <strong>npm run build:ssg</strong> (for static generation of routes)</li><li><strong>npm run start:serve</strong> (or deploy everywhere you want if you don't need SSR)</li></ol><p>you can use <strong>npm run serve:screen</strong> to run the process in background with linux screen utility</p><p><strong>NOTE:</strong> to improve SEO enable prerender feature for SSR (Read dedicated paragraph below)</p><h2>Core concepts</h2><p>With this base you can build 3 kind of projects:</p><h3>1. PWA: Client Side Rendered App (CSR)</h3><p>A CSR application is totally rendered by the client via Javascript. The client will receive only a small index.html and the bundled javascript application will render the content.</p><p>To build this kind of app you don't need any kind of requirement since you could develop and start/build your app directly with npm commands.</p><p><strong>Pros:</strong></p><ul><li>No server-side nodejs required, you can host everywhere you want</li><li>Building process is relatively fast</li></ul><p><strong>Cons</strong></p><ul><li>Not all Web-Crawlers can indexing such app properly.</li><li>Browser with old or deactivated Javascript cannot content of this app.</li></ul><p>You should use it as a web app not as a blog or any other website that needs indexing and high compatibility.</p><h3>2. Static PWA: CSR + Static Site Generation (CSR+SSG)</h3><p>A Static Site Generation is a technique that allow you to pre-render your app pages/routes during the build process creating a version of that page that contains the content to index and the bundler will only attach event-listener to pre-existing html (hydration). This will allow you to deploy a static site that will be fully indexable by the crawlers.</p><p>To use SSG you should install react-snap globally using <strong>npm install -g react-snap</strong> then you can use: <strong>npm run build:ssg</strong> instead of normal build command. We don't include it in our package.json because it downloads the entire chromium engine that is quite big, so you will download it on your needs.</p><p><strong>Pros</strong></p><ul><li>No server-side nodejs required, you can host everywhere you want</li><li>Can be indexed by all crawlers</li><li>First loading is very fast because it contains already all html</li></ul><p><strong>Cons</strong></p><ul><li>Build process is slower</li><li>If you add new content you must build it again if you need SSG features</li></ul><p>More info Here: <a href="https://medium.com/@tannerlinsley/%EF%B8%8F-introducing-react-static-a-progressive-static-site-framework-for-react-3470d2a51ebc">React Static</a></p><h3>3. Universal PWA: CSR + SSG + Server Side Rendering (SSR)</h3><p>The approach above (CSR+SSG) already allows you to develop an app/website that can be modern and indexable, but it's not yet an Universal PWA. There are a lot of websites that changes their contents very often (a blog) or even in real-time depending on some parameters (search engine). Such apps cannot be totally static generated at build time of course so we need an extra layer to handle the "crowling problem". This is called Static Server Rendering. The SSR is the method used by old web apps (often written in PHP or Java Servlets) to serve the entire content to the client directly rendered by the server. This method can be used now as an helper to CSR and SSG serving pre-rendered and not dynamic static page only to some kind of clients (such as Web-Crawlers).</p><p>To use SSR you need to install following packages:</p><p><strong>npm install prerender prerender-node</strong></p><p>We don't include it in our package.json because it downloads the entire chromium engine that is quite big, so you will download it on your needs.</p><p>then you have just to configure your conf.js and enable prerender conf.</p><p><strong>Pros</strong></p><ul><li>Can be indexed by all crawlers</li><li>First loading is very fast because it contains already all html</li><li>Can automatically generate pages not included in SSG build</li></ul><p><strong>Cons</strong></p><ul><li>It requires nodejs server</li><li>You cannot deploy everywhere</li></ul><p><strong>NOTE:</strong> Of course you can even use CSR+SSG with a 3rd party CDN service that will prerender your pages allowing you to host your app everywhere, but mostly such services are not free.</p><h2>Directory Structure</h2><p>This project follows partially the <a href="http://hw-core.github.io/directory-structure/">hw-core directory structure</a> on (CRA folder structure)<a href="">https://facebook.github.io/create-react-app/docs/folder-structure</a></p><p>With following specs:</p><ul><li>apps: tools used by the project for specific tasks</li><li>public: public assets included in build but not directly required by src/</li><li>src: application sources<ul><li>client<ul><li>App: Application Layout</li><li>Components: Reusable application-specific components <strong>(generally they cannot be shared between projects)</strong></li><li>Routes: Components related to specific routes</li></ul></li><li>conf: platform configuration files</li><li>deps: internal reusable dependencies <strong>(they can be shared between projects)</strong></li><li>modules: optional and pluggable modules to extend app functionalities</li></ul></li></ul><p>For internal deps and modules we're using <a href="https://github.com/ingydotnet/git-subrepo">subrepo</a> instead of subtree/submodule that are not enough to both include a git based dependency and working on it at the same time. You can check the app.sh script to see how to sync your dependencies.</p><h2>Folder aliases:</h2><p>We're monkey-patching the CRA via <a href="https://github.com/sharegate/craco/blob/master/README.md">craco</a> library allowing us to create some useful path alias to avoid relative path hell: ( ../../ )</p><p>So you can use paths defined in cra-config.js file:</p><pre><code>    "@this/src": path.resolve(__dirname, 'src/'),
    "@this/conf": path.resolve(__dirname, 'src/conf'),
    "@hw-core": path.resolve(__dirname, 'src/deps/hw-core')</code></pre><h2>TODO (check our issuetracker for details):</h2><ul><li>Improve generation of static sitemaps</li><li>Implement exclude option for SSG routes</li><li>Integration with cordova/phonegap and electron</li></ul></div></div></div></div><script>!function(f){function e(e){for(var r,n,t=e[0],o=e[1],u=e[2],i=0,l=[];i<t.length;i++)n=t[i],p[n]&&l.push(p[n][0]),p[n]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(f[r]=o[r]);for(s&&s(e);l.length;)l.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var e,r=0;r<c.length;r++){for(var n=c[r],t=!0,o=1;o<n.length;o++){var u=n[o];0!==p[u]&&(t=!1)}t&&(c.splice(r--,1),e=i(i.s=n[0]))}return e}var n={},p={2:0},c=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return f[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=f,i.c=n,i.d=function(e,r,n){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(r,e){if(1&e&&(r=i(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var t in r)i.d(n,t,function(e){return r[e]}.bind(null,t));return n},i.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="/universal-pwa/";var r=window.webpackJsonp=window.webpackJsonp||[],t=r.push.bind(r);r.push=e,r=r.slice();for(var o=0;o<r.length;o++)e(r[o]);var s=t;a()}([])</script><script src="/universal-pwa/static/js/1.d52bbd2a.chunk.js"></script><script src="/universal-pwa/static/js/main.35ff5035.chunk.js"></script></body></html>